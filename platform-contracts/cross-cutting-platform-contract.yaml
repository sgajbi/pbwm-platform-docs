version: 1
owner_repo: lotus-platform
scope:
  services:
    - lotus-core
    - lotus-performance
    - lotus-advise
    - lotus-report
    - lotus-gateway
principles:
  - api_driven_integration_only
  - no_shared_database_between_services
  - domain_owned_service_boundaries
  - documentation_and_code_in_same_change_cycle
api_contract:
  openapi:
    docs_endpoint: /docs
    schema_endpoint: /openapi.json
    required_controls:
      - make_openapi_gate_target
      - ci_openapi_gate_execution
      - contract_tests_or_quality_gate
      - endpoint_descriptions_and_examples_for_public_contracts
observability:
  correlation:
    canonical_header: X-Correlation-Id
    accepted_aliases:
      - X-Correlation-ID
  request_id_header: X-Request-Id
  trace:
    required_headers:
      - traceparent
      - tracestate
    fallback_trace_header: X-Trace-Id
  health_endpoints:
    liveness: /health/live
    readiness: /health/ready
    compatibility_endpoint: /health
  metrics:
    endpoint: /metrics
    required_dimensions:
      - service
      - environment
      - endpoint
      - method
      - status_code
  logging:
    format: structured_json
    required_fields:
      - timestamp
      - level
      - service
      - environment
      - correlation_id
      - request_id
      - trace_id
      - message
governance:
  required_artifacts:
    - rfc_for_cross_cutting_change
    - runbook_update_for_operational_change
    - architecture_bible_reference
testing:
  pyramid:
    unit_percent_range:
      min: 70
      max: 85
    integration_percent_range:
      min: 15
      max: 25
    e2e_percent_range:
      min: 5
      max: 10
  coverage_targets:
    total_meaningful_percent_min: 99
    unit_domain_logic_percent_min: 95
  quality_rules:
    - no_coverage_only_assertions
    - include_negative_paths_for_high_risk_workflows
    - assert_domain_outcomes_not_only_status_codes



